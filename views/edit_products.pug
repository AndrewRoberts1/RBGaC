doctype html
html(lang='en')
  head
    // Required meta tags
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    // Bootstrap CSS
    link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css', rel='stylesheet', integrity='sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC', crossorigin='anonymous')

    link(rel='stylesheet', href='/stylesheets/style.css')
    // Page title
    title Add Products
  body
    // Insert navbar from partial folder
    include ../views/partials/header
    // Main Content [START]
    .container-fluid.mainCont.px-0.py-0
        .headerPadd
        // Header Image Section [START]
        .headerImage.genericHead.bottomAlign
            .h2.headerText.text-center Add Products

            // Header Image Section [END]
        .row.mainRow.justify-content-center
            .col-md-10.mt-3.mb-3.rbContainer
                div.text-center
                    form(class="p-3" method="POST" action="/productsave")
                        input#addProdMode.form-control(type='text' name="mode" value=mode  style="display:none;")
                        input#addProdMode.form-control(type='text' name="product_id" value=product_id  style="display:none;")
                        .row.mt-3.justify-content-center
                            .col-md-4.mt-2
                                label.form-label Product Name
                                input#addProdName.form-control(type='text' name="product_name" value=product_name)
                            .col-md-4.mt-2
                                label.form-label Price
                                input#addPrice.form-control(type='text' name="price" value=price)
                            .col-md-4.mt-2
                                label.form-label Colour
                                input#addColour.form-control(type='text' name="colour" value=colour)
                            .row.mt-3.justify-content-center
                            .col-md-4.mt-2
                                label.form-label Brand Name
                                select#addBrand.form-select(type='text' name="brand")
                                    unless brand
                                        option(value='' selected='') Please select...
                                    
                                    each row in brand_options 
                                        if brand
                                            option(value=row.brand_id selected) #{row.brand_name}
                                        else 
                                            option(value=row.brand_id selected) #{row.brand_name}
                            .col-md-4.mt-2
                                label.form-label Activity
                                select#addActivity.form-select(type='text' name="activity")
                                    unless activity
                                        option(value='' selected='') Please select...
                                    
                                    each row in activity_options 
                                        if activity
                                            option(value=row.activity_id selected) #{row.activity}
                                        else 
                                            option(value=row.activity_id selected) #{row.activity}
                            .col-md-4.mt-2
                                label.form-label Product Type
                                select#addProdType.form-select(type='text' name="product_type")
                                    unless product_type
                                        option(value='' selected='') Please select...
                                    
                                    each row in product_type_options 
                                        if product_type
                                            option(value=row.product_category_id selected) #{row.category}
                                        else 
                                            option(value=row.product_category_id selected) #{row.category}
                            .row.mt-3.justify-content-center
                            .col-md-5.mt-2
                                label.form-label Description
                                textarea#addDesc.form-control(type='text' name="desc" value=desc)
                                //- label.form-label.mt-2 Image
                                //- input#addImage.form-control(type='file')
                                label.form-label Popular Item
                                input#addColour.form-control(type='text' placeholder="1 = Yes / 0 = No" name="popular_item" value=popular_item)
                            .col-md-7.mt-2
                                #sizeAccordion.accordion
                                .accordion-item
                                    h2#accHeading.accordion-header
                                    button.accordion-button(type='button' data-bs-toggle='collapse' data-bs-target='#sizeAccordionCollapse' aria-expanded='true' aria-controls='sizeAccordionCollapse')
                                        | Add size options
                                    #sizeAccordionCollapse.accordion-collapse.collapse.show(aria-labelledby='accHeading' data-bs-parent='sizeAccordion')
                                    .accordion-body
                                        // Row to add elements using JS
                                        #sizeOptionRows
                                        .row.mt-3.justify-content-center
                                        .col-md-4.mt-2.mx-auto.d-grid
                                            button#addSizeOption.btn.btn-primary Add new size
                            .row.mt-3.justify-content-center
                            .col-md-4.mx-auto.d-grid
                                button#addProduct.btn.btn-secondary(type="submit") Save

        
        // Main Content [END]

    // Insert footer from partial folder  
    include ../views/partials/footer
      
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js', integrity='sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM', crossorigin='anonymous')
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js')

    // JavaScript - to make page interactive
    script.
        const addSizeBtn = document.querySelector('#addSizeOption');
        
        addSizeBtn.onclick = function () {
            var sizeRow= document.getElementById('sizeOptionRows');
            var tempHtml = "";
            tempHtml += '<div class="row mt-3 justify-content-center">';
            tempHtml += '                                                <div class="col-md-8 mt-2">';
            tempHtml += '                                                    <label class="form-label">Size Option</label>';
            tempHtml += '                                                    <input class="form-control addSizeClass" type="text" id="addSize">';
            tempHtml += '                                                </div>';
            tempHtml += '                                                <div class="col-md-3 mt-2 d-flex align-items-end">';
            tempHtml += '                                                    <button class="btn btn-danger" onclick="removeSize(this)">Remove</button>';
            tempHtml += '                                                </div>';
            tempHtml += '                                            </div>';
            
            sizeRow.innerHTML += tempHtml;

            var sizeArr = [];
            document.querySelectorAll('.addSizeClass').forEach(function(el) {
                sizeArr.push(el.value)
            })

        }
      

  body
  // jQuery and Bootstrap Bundle
  // js