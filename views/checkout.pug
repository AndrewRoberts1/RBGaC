doctype html
html(lang='en')
  head
    // Required meta tags
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    // Bootstrap CSS
    link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css', rel='stylesheet', integrity='sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC', crossorigin='anonymous')

    link(rel='stylesheet', href='/stylesheets/style.css')
    // Page title
    title Checkout
  body
    // Insert navbar from partial folder
    include ../views/partials/header
    // Main Content [START]
    .container-fluid.mainCont.px-0.py-0
        .headerPadd
        // Header Image Section [START]
        .headerImage.genericHead.bottomAlign
            .h2.headerText.text-center Checkout

            // Header Image Section [END]
        .row.mainRow.justify-content-center
            .col-md-8.mt-3.mb-3.rbContainer
                form(class="p-3" method="POST" action="/payment")
                    .row.justify-content-center
                        h4 Your Details
                        .col-md-6
                            //-input First name
                            label( for="inputFirstName" class="sr-only mt-3") First Name
                            input(type="text" name="first_name" id="inputFirstName" class="form-control" placeholder="First Name" required autofocus  value=first_name)
                        .col-md-6
                            //-input Surname
                            label( for="inputSurname" class="sr-only mt-3") Surname
                            input(type="text" name="second_name" id="inputSurname" class="form-control" placeholder="Surname" required autofocus  value=surname)
                    .row.justify-content-center
                        .col-md-6
                            //-input email
                            label(for="inputEmail" class="sr-only mt-3") Email address
                            input(type="email" name="email" id="inputEmail" class="form-control" placeholder="example@email.com" required  value=email)
                        .col-md-6
                            //-input Phone Number
                            label(for="inputNumber" class="sr-only mt-3") Phone Number
                            input(type="number" name="phone" id="inputNumber" class="form-control" placeholder="01234456789" required  value=phone)
                        hr
                    .row.justify-content-center
                        h4 Delivery Details
                        .col-md-6
                            //-input Building name
                            input(type="text" name="name_number" id="inputNameNumber" class="form-control" placeholder="Building Name / Number" required  value=name_number)
                        .col-md-6
                            //-input County
                            input(type="text" name="county" id="inputCounty" class="form-control" placeholder="County" required  value=county)
                    .row.justify-content-center
                        .col-md-6
                            //-input Street
                            input(type="text" name="street" id="inputStreet" class="form-control" placeholder="Street Name" required  value=street)
                        .col-md-6
                            //-input Country
                            input(type="text" name="country" id="inputCountry" class="form-control" placeholder="Country" required  value=country)
                    .row.justify-content-center
                        .col-md-6
                            //-input City
                            input(type="text" name="city" id="inputCity" class="form-control" placeholder="City / Town" required  value=city)
                        .col-md-6
                            //-input postcode
                            input(type="text" name="postcode" id="inputPostcode" class="form-control" placeholder="Postcode" required  value=postcode)
                        hr
                    .row.justify-content-center
                        h4 Payment Details
                        .col-md-12
                            //-input Building name
                            input(type="number" name="card_number" id="inputCardNumber" class="form-control" placeholder="Card Number" required  value=card_number)
                    .row.justify-content-center
                        .col-md-6
                            //-input Street
                            input(type="number" name="cvv" id="inputCVV" class="form-control" placeholder="Security Code" required  value=cvv)
                        .col-md-6
                            //-input Country
                            input(type="text" name="exp_date" id="inputExpDate" class="form-control" placeholder="Exp Date" required  value=exp_date)
                    




            .col-md-1
            .col-md-3.mt-3.mb-3.rbContainer.text-center.checkoutCol
                .row.checkoutDetails
                    .col.text-center
                    each row in basket_list
                        h6 #{row.quantity}x #{row.product_name}
                    form(id="basketForm" method="get" action="/") 
                        select#deliveryOptions.form-select.mt-5(required onchange="addDelivery(" +subTotal+")")
                            option(value="" selected) Delivery Options
                            option(value="10") Next Day - £10
                            option(value="7") 2-4 Working Days - £7
                            option(value="5") 5-7 Working Days - £5
                
                        h6.prodPriceTitle.mb-3.mt-5
                            | Sub Total
                            span.priceRight £#{subTotal}
                        h6.prodPriceTitle.mb-3
                            | Delivery
                            span#basketDelivery.priceRight £ - 
                        hr
                        h6.prodPriceTitle.mb-3
                            | Total
                            span#basketTotal.priceRight £#{subTotal}
                        button.btn.redBtn.mb-5( type="submit") Checkout
                
        
        // Main Content [END]

        // Insert footer from partial folder  
        include ../views/partials/footer
      
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js', integrity='sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM', crossorigin='anonymous')
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js')

    // JavaScript - to make page interactive
    script.
        function addDelivery(subTotal) {
            const deliveryOptions = document.getElementById('deliveryOptions');
            const basketDelivery = document.getElementById('basketDelivery');
            const basketTotal = document.getElementById('basketTotal');
            basketDelivery.innerHTML = "£"+deliveryOptions.value;
            basketTotal.innerHTML = "£"+(Number(deliveryOptions.value) + Number(subTotal)) ;
        }
      

  body
  // jQuery and Bootstrap Bundle
  // js